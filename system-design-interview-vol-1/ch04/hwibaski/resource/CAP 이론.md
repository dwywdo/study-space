
> CAP 관련 블로그: https://onduway.tistory.com/106

CAP 이론은 분산 시스템의 핵심 개념 중 하나로, **Consistency(일관성)**, **Availability(가용성)**, **Partition Tolerance(분할 허용성)**의 세 가지 속성 중 **한 번에 모두 만족시킬 수 없음을 설명**하는 이론입니다.

---

### 🔺 CAP 이론 (Brewer's Theorem)

> **"분산 시스템에서 네트워크에 장애가 발생했을 때, Consistency, Availability, Partition Tolerance 중에서 두 가지만 선택할 수 있다."**

---

### 세 가지 구성 요소 설명

| 구성 요소                            | 설명                                                                       |
| -------------------------------- | ------------------------------------------------------------------------ |
| **Consistency (일관성)**            | 모든 노드가 같은 데이터를 보여야 함. 즉, **어느 노드에서 읽든 항상 같은 결과를 얻을 수 있음**                |
| **Availability (가용성)**           | **모든 요청이 반드시 응답을 받아야 함** (성공 또는 실패라도). 즉, 일부 노드가 다운되어도 전체 시스템은 계속 작동해야 함 |
| **Partition Tolerance (분할 허용성)** | 네트워크에 **파티션(분할)**이 발생해도, 시스템은 멈추지 않고 작동해야 함                              |

---

### ⚖️ 세 가지 중 두 가지 선택

|선택 조합|설명|
|---|---|
|**CP**|일관성과 분할 허용성 보장 → 네트워크 분할 시 **응답을 포기**하더라도 데이터 일관성 유지🔸 예: HBase, MongoDB (일부 설정 시)|
|**CA**|일관성과 가용성 보장 → 네트워크 분할이 **없다고 가정**하고 설계됨🔸 현실적으로 거의 불가능 (네트워크는 언제든 분할될 수 있음)|
|**AP**|가용성과 분할 허용성 보장 → 네트워크 분할 시에도 응답은 계속하지만, **데이터 일관성이 깨질 수 있음**🔸 예: Cassandra, Couchbase, DynamoDB|

---

### 📌 핵심 정리

- **현실 세계의 분산 시스템은 Partition Tolerance를 반드시 고려해야 함** → 결국 CP 또는 AP 선택이 강제됨
    
- 어떤 조합을 선택할지는 **서비스의 목적과 상황에 따라 달라짐**
    
    - 금융 시스템: **CP** (일관성이 중요)
        
    - 소셜 피드: **AP** (가용성과 반응성 우선)
    